<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="content">
      <%- include('partials/nav') %>
      <div id="main">
        <h1><%= title %></h1>
        <form method="POST" action="">
          <div class="form">
            <label for="name">Name: </label>
            <input
              required
              type="text"
              id="name"
              name="name"
              value="<%= typeof food == 'undefined' ? '':food.name %>"
            />
            <div id="category_check">
              <label for="category">Category: </label>
              <% categories.forEach(category => { %>
              <input
                type="checkbox"
                id="<%= category._id %>"
                name="category"
                value="<%= category._id %>"
                unchecked
              />
              <label for="<%= category._id %>"><%= category.name %></label>
              <% }) %>
            </div>
            <label for="stock">Price: </label>
            <input
              required
              type="text"
              id="price"
              name="price"
              value="<%= typeof food == 'undefined' ? '':food.price %>"
            />
            <label for="stock">Stock: </label>
            <input
              required
              type="text"
              id="stock"
              name="stock"
              value="<%= typeof food == 'undefined' ? '':food.stock %>"
            />
            <div id="ingredient_check">
              <label for="ingredient">Ingredients: </label>
              <% ingredients.forEach(ingredient => { %>
              <input
                type="checkbox"
                id="<%= ingredient._id %>"
                name="ingredient"
                value="<%= ingredient._id %>"
                unchecked
              />
              <label for="<%= ingredient._id %>"><%= ingredient.name %></label>
              <% }) %>
            </div>
            <div class="button_div">
              <button class="button" type="submit">Submit</button>
              <a href="/catalog/foods"
                ><button class="button" type="button">Cancel</button></a
              >
            </div>
          </div>
        </form>

        <% if(typeof errors !="undefined"){ %>
        <ul>
          <% errors.forEach(err=>{%>
          <li><%=err.msg %></li>
          <% }) %>
        </ul>
        <% } %>
      </div>
    </div>
  </body>
</html>
